@model CategoryViewModel

@{
    ViewData["Title"] = "Category";
    Layout = "~/Views/Shared/_LayoutPublic.cshtml";
}

<!-- **** BACKGROUND !Important **** -->
<section class="tokkepedia-main clearfix">
    <div class="tokkepdia-sub">
    </div>
</section>
<!-- **** /BACKGROUND **** -->

<section class="special-area bg-white">
    <div class="container h-100">
        <div class="row h-100">
            <div class="col-12 col-md header-spacing">
                <br />
                <div class="row overview">
                    <div class="col-sm-12 text-center">
                        <h1>@Model.Category.Name</h1>
                    </div>
                </div>

                <div class="row overview">
                    <div class="col-md-12 user-pad text-center">
                        <h3>TOKS</h3>
                        <h4>@Model.Category.Toks</h4>
                    </div>
                </div>

                <div class="row overview">
                    <div class="col-sm-12 text-center">
                        @if (User != null)
                        {
                            if (User.Identity.IsAuthenticated)
                            {
                                <button id="BtnFollow" type="button" class="btn btn-primary btn-sm" style="border-radius: 20px">Follow</button>
                            }
                            else
                            {
                                <button id="BtnFollow" type="button" class="btn btn-primary btn-sm" style="border-radius: 20px" onclick="RequireLogin('Follow')">Follow</button>
                            }
                        }
                        else
                        {
                            <button id="BtnFollow" type="button" class="btn btn-primary btn-sm" style="border-radius: 20px" onclick="RequireLogin('Follow')">Follow</button>
                        }
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 text-center" style="padding-top: 12px;padding-bottom: 12px;">
                        <div class="col-md-6" style="margin: 0px auto;">
                            <div class="row">
                                <div class="col-md-6">
                                    <a id="btnPlayCards" asp-action="PlayToks" asp-controller="Set" asp-route-id="@Model.Category.Id" asp-route-type="3" style="width: 100%;"><img src="~/images/tokcards.jpg" /></a>
                                </div>
                                <div class="col-md-6">
                                    <a id="btnTokMatch" asp-action="TokMatch" asp-controller="Tok" asp-route-id="@Model.Category.Id" asp-route-type="3" style="width: 100%;"><img src="~/images/tokmatch.jpg" /></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">

                    <!--/col-3-->
                    <div class="col-sm-12">
                        <!--col-sm-9-->
                        <ul class="nav nav-tabs" id="myTab">
                            <li class="nav-item nav-link"><a href="#home" data-toggle="tab">Toks</a></li>
                            <li class="nav-item nav-link"><a href="#cards" data-toggle="tab">Tok Cards</a></li>
                            <li class="nav-item nav-link"><a href="#toklist" data-toggle="tab" id="tabTokList">Tok List</a></li>
                        </ul>

                        <div class="tab-content">
                            <div class="tab-pane active" id="home">
                                <input id="IsLoadMore" type="hidden" value="yes" />
                                <input id="LoadMoreFunction" type="hidden" value="GetSearchData" />
                                <input id="ValSearchText" type="hidden" value="" />
                                <input id="TxtCategory" type="hidden" value="@Model.Category.Id" />
                                <input id="CountryFilter" type="hidden" value="" />
                                <input id="TokTypeFilter" type="hidden" value="" />
                                <input id="TokTypeIdFilter" type="hidden" value="" />
                                <input id="UserIdFilter" type="hidden" value="" />
                                <input id="searchorder" type="hidden" value="newest" />
                                <input id="Token" type="hidden" />

                                <div class="center" id="containerProgress" style="margin: 24px auto">
                                    <div class="colorlib-load"></div>
                                </div>
                                <div id="tokContainer" style="margin-top: 1em !important;">
                                    <div class="container">
                                        <div id="tokTileContainer" class="row">

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="justify-content-center" style="align-content:center!important;">
                                                    <div class="justify-content-center tokProgress" style="display:none; height:200px; width:200px;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--/tab-pane-->
                            <div class="tab-pane active" id="cards" style="visibility:hidden;">
                                <div class="center cardContainerProgress" style="margin: 24px auto">
                                    <div class="colorlib-load"></div>
                                </div>
                                <div id="tokCardContainer" class="container" style="margin-top: 1em !important;">
                                    <div class="container">
                                        <div id="cardContainer" class="row">

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="justify-content-center" style="align-content:center!important;">
                                                    <div class="justify-content-center cardMoreProgress" style="display:none; height:200px; width:200px;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--/tab-pane-->
                            <div class="tab-pane" id="toklist">
                                <div class="center cardContainerProgress" style="margin: 24px auto">
                                    <div class="colorlib-load"></div>
                                </div>
                                <div id="tokListContainer" class="container" style="margin-top: 1em !important;">
                                    <div class="container">
                                        <div id="listContainer" class="row">

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="justify-content-center" style="align-content:center!important;">
                                                    <div class="justify-content-center tokProgress" style="display:none; height:200px; width:200px;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--/tab-pane-->
                    </div>
                    <!--/tab-content-->

                </div>
                <!--/row-->
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/4.13.0/bodymovin.js"></script>
    <script src="~/js/TokFeed.js"></script>
    <script src="~/js/common.js"></script>
    <script src="~/js/jquery.flip.js"></script>
    <script>
        $(document).ready(function () {
            renderCount = 4;
            //GetInitData($("#TxtCategory").val(), 3, false, true);
            GetInitRawData($("#TxtCategory").val(), 3);
        });
    </script>
}
